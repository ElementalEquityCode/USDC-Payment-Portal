[{"/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/index.js":"1","/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/reportWebVitals.js":"2","/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/App.js":"3","/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/PaymentForm/PaymentForm.js":"4","/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/AmountToPayForm/AmountToPayForm.js":"5","/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Contexts/ValuesContext.js":"6","/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/Grid/Grid.js":"7","/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/TextField/TextField.js":"8","/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/SectionLabel/SectionLabel.js":"9","/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/TodaysDate/TodaysDate.js":"10","/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/GeneralActionButton/GeneralActionButton.js":"11","/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/PaymentFromTo/PaymentFromTo.js":"12","/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/ExclamationError/ExclamationError.js":"13","/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/AmountToPayTextField/AmountToPayTextField.js":"14"},{"size":500,"mtime":1630698941157,"results":"15","hashOfConfig":"16"},{"size":374,"mtime":1630698806528,"results":"17","hashOfConfig":"16"},{"size":188,"mtime":1630700718166,"results":"18","hashOfConfig":"16"},{"size":7040,"mtime":1632075905477,"results":"19","hashOfConfig":"16"},{"size":959,"mtime":1631720802185,"results":"20","hashOfConfig":"16"},{"size":92,"mtime":1631720802209,"results":"21","hashOfConfig":"16"},{"size":552,"mtime":1631232635751,"results":"22","hashOfConfig":"16"},{"size":3007,"mtime":1632076582958,"results":"23","hashOfConfig":"16"},{"size":456,"mtime":1631055338066,"results":"24","hashOfConfig":"16"},{"size":518,"mtime":1631720802208,"results":"25","hashOfConfig":"16"},{"size":1752,"mtime":1631753455372,"results":"26","hashOfConfig":"16"},{"size":683,"mtime":1631746543184,"results":"27","hashOfConfig":"16"},{"size":1202,"mtime":1631744628854,"results":"28","hashOfConfig":"16"},{"size":3480,"mtime":1631824019557,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"1ovfb6i",{"filePath":"33","messages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"35","messages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"37","messages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39"},{"filePath":"40","messages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"42","messages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"46","messages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"52","messages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"54","messages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"56","messages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"58","messages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/index.js",[],["60","61","62","63","64","65"],"/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/reportWebVitals.js",[],"/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/App.js",[],"/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/PaymentForm/PaymentForm.js",["66","67","68"],"import React from 'react';\nimport axios from 'axios';\nimport { v4 as UUID } from 'uuid';\nimport AmountToPayForm from '../AmountToPayForm/AmountToPayForm';\nimport ValuesContext from '../../Contexts/ValuesContext';\nimport TodaysDate from '../TodaysDate/TodaysDate';\nimport SectionLabel from '../SectionLabel/SectionLabel';\nimport TextField from '../TextField/TextField';\nimport Grid from '../Grid/Grid';\nimport styles from './PaymentForm.module.css';\n\nconst openPGP = require('openpgp');\nconst validator = require('email-validator');\n\nclass PaymentForm extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      key: {\n        keyId: '',\n        publicKey: ''\n      },\n      name: '',\n      email: '',\n      cardNumber: '',\n      cardExpiry: '',\n      cardCVV: ',',\n      amountEntered: '',\n      isFormComplete: false\n    };\n  }\n\n  handleEmailChanged = (event) => {\n    this.setState({\n      email: event.target.value\n    }, () => {\n      this.checkIfFormIsComplete();\n    });\n  }\n\n  handleNameChanged = (event) => {\n    this.setState({\n      name: event.target.value\n    }, () => {\n      this.checkIfFormIsComplete();\n    });\n  }\n\n  handleCardNumberChanged = (event) => {\n    this.setState({\n      cardNumber: event.target.value\n    }, () => {\n      this.checkIfFormIsComplete();\n    });\n  }\n\n  handleCardExpiryChanged = (event) => {\n    this.setState({\n      cardExpiry: event.target.value\n    }, () => {\n      this.checkIfFormIsComplete();\n    });\n  }\n\n  handleCardCVVChanged = (event) => {\n    this.setState({\n      cardCVV: event.target.value\n    }, () => {\n      this.checkIfFormIsComplete();\n    });\n  }\n\n  handleAmountEnteredChanged = (value) => {\n    this.setState({\n      amountEntered: value\n    }, () => {\n      this.checkIfFormIsComplete();\n    });\n  }\n\n  checkIfFormIsComplete = () => {\n    const { name } = this.state;\n    const { email } = this.state;\n\n    const { cardNumber } = this.state;\n    const { cardExpiry } = this.state;\n    const { cardCVV } = this.state;\n\n    const { amountEntered } = this.state;\n\n    if (name.trim() !== '' && validator.validate(email.trim()) && amountEntered !== '' && cardNumber.trim().length === 16 && cardExpiry.trim().length === 7 && cardCVV.trim().length === 3) {\n      this.setState({\n        isFormComplete: true\n      });\n    } else {\n      this.setState({\n        isFormComplete: false\n      });\n    }\n  }\n\n  formCompletionHandler = () => {\n    const { isFormComplete } = this.state;\n\n    if (isFormComplete) {\n      this.createCard();\n    }\n  }\n\n  createCard = async () => {\n    const { name } = this.state;\n    const { email } = this.state;\n\n    const { cardNumber } = this.state;\n    const { cardExpiry } = this.state;\n    const { cardCVV } = this.state;\n\n    const [cardExpiryMonth, cardExpiryYear] = cardExpiry.split('/');\n\n    const { amountEntered } = this.state;\n\n    const { key } = this.state;\n    const { keyId } = key;\n    const { publicKey } = key;\n\n    const payload = {\n      idempotencyKey: UUID(),\n      keyId,\n      encryptedData: '',\n      billingDetails: {\n        name,\n        city: 'Doral',\n        country: 'US',\n        line1: '11133 NW 71st Ter',\n        district: 'FL',\n        postalCode: '33178'\n      },\n      expMonth: parseInt(cardExpiryMonth, 10),\n      expYear: parseInt(cardExpiryYear, 10),\n      metadata: {\n        email,\n        sessionId: UUID(),\n        ipAddress: '172.33.222.1'\n      },\n      encryptedCVV: '',\n      amount: amountEntered\n    };\n\n    const cardDetails = {\n      number: cardNumber,\n      cvv: cardCVV\n    };\n\n    const data = await this.encryptCardData(cardDetails, publicKey, keyId);\n    const encryptedCVV = await this.encryptCVV(cardDetails.cvv, publicKey, keyId);\n\n    payload.encryptedData = data.encryptedData;\n    payload.encryptedCVV = encryptedCVV.encryptedData;\n\n    const requestOptions = {\n      data: {\n        payload\n      }\n    };\n\n    axios.post('/create-card-payment', requestOptions).then((response) => {\n      console.log(response);\n    }).catch((error) => {\n      console.log(error);\n    });\n  }\n\n  encryptCardData = async (cardDetails, key, keyId) => {\n    const decodedPublicKey = atob(key);\n    const options = {\n      message: await openPGP.createMessage({ text: JSON.stringify(cardDetails) }),\n      encryptionKeys: await openPGP.readKey({ armoredKey: decodedPublicKey })\n    };\n\n    return openPGP.encrypt(options).then((cipherText) => (\n      {\n        encryptedData: btoa(cipherText),\n        keyId\n      }\n    ));\n  }\n\n  encryptCVV = async (CVV, key, keyId) => {\n    const decodedPublicKey = atob(key);\n    const options = {\n      message: await openPGP.createMessage({ text: JSON.stringify(CVV) }),\n      encryptionKeys: await openPGP.readKey({ armoredKey: decodedPublicKey })\n    };\n\n    return openPGP.encrypt(options).then((cipherText) => (\n      {\n        encryptedData: btoa(cipherText),\n        keyId\n      }\n    ));\n  }\n\n  componentDidMount = () => {\n    axios.get('/key').then((response) => {\n      this.setState({\n        key: response.data\n      });\n    }).catch((error) => {\n      console.log(error);\n    });\n  }\n\n  render() {\n    const { isFormComplete } = this.state;\n    const { amountEntered } = this.state;\n    const { name } = this.state;\n\n    return (\n      <div\n        className={styles.overallGrid}\n      >\n        <div className={styles.paymentForm}>\n          <TodaysDate />\n          <Grid\n            columns=\"one\"\n          >\n            <SectionLabel\n              type=\"dark\"\n            >\n              Client Information\n            </SectionLabel>\n            <TextField\n              type=\"name\"\n              placeholder=\"Name\"\n              onChangeEvent={this.handleNameChanged}\n            />\n            <TextField\n              type=\"email\"\n              placeholder=\"Email\"\n              onChangeEvent={this.handleEmailChanged}\n            />\n          </Grid>\n          <Grid\n            columns=\"one\"\n          >\n            <SectionLabel\n              type=\"dark\"\n            >\n              Card Information\n            </SectionLabel>\n            <TextField\n              type=\"cardNumber\"\n              placeholder=\"1234 1234 1234 1234\"\n              onChangeEvent={this.handleCardNumberChanged}\n            />\n            <TextField\n              type=\"cardExpiry\"\n              placeholder=\"MM/YY\"\n              onChangeEvent={this.handleCardExpiryChanged}\n            />\n            <TextField\n              type=\"cardCVV\"\n              placeholder=\"CVV\"\n              onChangeEvent={this.handleCardCVVChanged}\n            />\n          </Grid>\n        </div>\n        <div className={styles.amountToPayForm}>\n          <ValuesContext.Provider value={{\n            name,\n            handleAmountEnteredChanged: this.handleAmountEnteredChanged,\n            amountEntered,\n            isFormComplete,\n            formCompletionHandler: this.formCompletionHandler\n          }}\n          >\n            <AmountToPayForm />\n          </ValuesContext.Provider>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default PaymentForm;\n","/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/AmountToPayForm/AmountToPayForm.js",[],"/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Contexts/ValuesContext.js",[],"/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/Grid/Grid.js",[],"/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/TextField/TextField.js",[],"/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/SectionLabel/SectionLabel.js",[],"/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/TodaysDate/TodaysDate.js",[],"/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/GeneralActionButton/GeneralActionButton.js",[],"/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/PaymentFromTo/PaymentFromTo.js",[],"/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/ExclamationError/ExclamationError.js",[],"/Users/danielvalencia/Documents/Programming/Web Development/React Apps/usdc-payment-portal/Client/src/Components/AmountToPayTextField/AmountToPayTextField.js",[],{"ruleId":"69","replacedBy":"70"},{"ruleId":"71","replacedBy":"72"},{"ruleId":"73","replacedBy":"74"},{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","replacedBy":"78"},{"ruleId":"79","replacedBy":"80"},{"ruleId":"81","severity":1,"message":"82","line":168,"column":7,"nodeType":"83","messageId":"84","endLine":168,"endColumn":18},{"ruleId":"81","severity":1,"message":"82","line":170,"column":7,"nodeType":"83","messageId":"84","endLine":170,"endColumn":18},{"ruleId":"81","severity":1,"message":"82","line":210,"column":7,"nodeType":"83","messageId":"84","endLine":210,"endColumn":18},"lines-around-directive",["85"],"no-spaced-func",["86"],"global-require",[],"no-buffer-constructor",[],"no-new-require",[],"no-path-concat",[],"no-console","Unexpected console statement.","MemberExpression","unexpected","padding-line-between-statements","func-call-spacing"]